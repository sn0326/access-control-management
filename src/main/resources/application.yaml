spring:
  application:
    name: access-control-management

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: true
    properties:
      hibernate:
        format_sql: true

  # 構造化ロギング設定
  structured:
    format:
      console: ecs  # Elastic Common Schema形式
    ecs:
      service:
        name: ${spring.application.name}
        version: 0.0.1-SNAPSHOT
        environment: ${SPRING_PROFILES_ACTIVE:default}

  flyway:
    enabled: true
    locations: classpath:db/migration

server:
  port: ${PORT:8080}
  # X-Forwarded-*ヘッダーを考慮してHTTPSリダイレクトURIを正しく生成
  # Cloud Runのプロキシ環境ではNATIVEを使用
  forward-headers-strategy: NATIVE

logging:
  level:
    org.flywaydb: DEBUG

pbac:
  # DENY_OVERRIDES: 1件でもDENYがあればDENY
  # PERMIT_OVERRIDES: 1件でもPERMITがあればPERMIT
  # FIRST_APPLICABLE: 優先度順に最初に適用されたポリシーを採用
  combining-algorithm: DENY_OVERRIDES

# 管理者認証情報（環境変数で上書き可能）
# 本番環境では必ず ADMIN_USERNAME / ADMIN_PASSWORD 環境変数を設定すること
# ADMIN_USERNAME: admin（デフォルト）
# ADMIN_PASSWORD: changeme（デフォルト、本番では必ず変更すること）
