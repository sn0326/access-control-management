spring:
  application:
    name: access-control-management

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: true
    properties:
      hibernate:
        format_sql: true

  # 構造化ロギング設定
  structured:
    format:
      console: ecs  # Elastic Common Schema形式
    ecs:
      service:
        name: ${spring.application.name}
        version: 0.0.1-SNAPSHOT
        environment: ${SPRING_PROFILES_ACTIVE:default}

server:
  port: ${PORT:8080}
  # X-Forwarded-*ヘッダーを考慮してHTTPSリダイレクトURIを正しく生成
  # Cloud Runのプロキシ環境ではNATIVEを使用
  forward-headers-strategy: NATIVE

  flyway:
    enabled: true
    locations: classpath:db/migration

pbac:
  # DENY_OVERRIDES: 1件でもDENYがあればDENY
  # PERMIT_OVERRIDES: 1件でもPERMITがあればPERMIT
  # FIRST_APPLICABLE: 優先度順に最初に適用されたポリシーを採用
  combining-algorithm: DENY_OVERRIDES
